<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Crux-Sit: game/include/mouse/mouse.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Crux-Sit
   </div>
   <div id="projectbrief">Jogo desenvolvido em C para a FPGA DE1-SoC com ajuda da GPU CoLenda</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_37c6514aeece95293041e34c0f2e0784.html">game</a></li><li class="navelem"><a class="el" href="dir_799e54a6419ed2c37fa77fc1f6ae00fe.html">include</a></li><li class="navelem"><a class="el" href="dir_d07d2cf73bf2caaef4e1329eb27a2005.html">mouse</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mouse.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="mouse_8h_source.html">mouse.h</a>&quot;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mouse.c:</div>
<div class="dyncontent">
<div class="center"><img src="mouse_8c__incl.png" border="0" usemap="#agame_2include_2mouse_2mouse_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4cc4571c32f6195814ce1d16cfd19e7b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmouse__t.html">mouse_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mouse_8c.html#a4cc4571c32f6195814ce1d16cfd19e7b">mouseinit</a> ()</td></tr>
<tr class="memdesc:a4cc4571c32f6195814ce1d16cfd19e7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a mouse structure and opens the mouse device file.  <a href="mouse_8c.html#a4cc4571c32f6195814ce1d16cfd19e7b">More...</a><br /></td></tr>
<tr class="separator:a4cc4571c32f6195814ce1d16cfd19e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe00130c2443fce556f15e793ce861ef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mouse_8c.html#abe00130c2443fce556f15e793ce861ef">validatemouse</a> (<a class="el" href="structmouse__t.html">mouse_t</a> *<a class="el" href="test_8c.html#a2c20eaa54498e32ea16e679ff12d5323">mouse</a>)</td></tr>
<tr class="memdesc:abe00130c2443fce556f15e793ce861ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates the mouse structure and its file descriptor.  <a href="mouse_8c.html#abe00130c2443fce556f15e793ce861ef">More...</a><br /></td></tr>
<tr class="separator:abe00130c2443fce556f15e793ce861ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94c9794a1c89c39715d89317688cd235"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mouse_8c.html#a94c9794a1c89c39715d89317688cd235">mouseclose</a> (<a class="el" href="structmouse__t.html">mouse_t</a> *<a class="el" href="test_8c.html#a2c20eaa54498e32ea16e679ff12d5323">mouse</a>)</td></tr>
<tr class="memdesc:a94c9794a1c89c39715d89317688cd235"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the mouse device file descriptor. This function closes the file descriptor of the mouse device. It sets the file descriptor to -1 to indicate that the device is no longer open.  <a href="mouse_8c.html#a94c9794a1c89c39715d89317688cd235">More...</a><br /></td></tr>
<tr class="separator:a94c9794a1c89c39715d89317688cd235"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e3e727f14416744c71579ff5cc9aab9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mouse_8c.html#a4e3e727f14416744c71579ff5cc9aab9">mouseread</a> (<a class="el" href="structmouse__t.html">mouse_t</a> *<a class="el" href="test_8c.html#a2c20eaa54498e32ea16e679ff12d5323">mouse</a>)</td></tr>
<tr class="memdesc:a4e3e727f14416744c71579ff5cc9aab9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads data from the mouse device and updates the mouse state. This function reads data from the mouse device file descriptor and updates the mouse state based on the read data. It also detects button press and release transitions.  <a href="mouse_8c.html#a4e3e727f14416744c71579ff5cc9aab9">More...</a><br /></td></tr>
<tr class="separator:a4e3e727f14416744c71579ff5cc9aab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a2860eb869adc1c431cba4b8acfbe39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mouse_8c.html#a4a2860eb869adc1c431cba4b8acfbe39">updatemousesensitivity</a> (<a class="el" href="structmouse__t.html">mouse_t</a> *<a class="el" href="test_8c.html#a2c20eaa54498e32ea16e679ff12d5323">mouse</a>, int mx, int my)</td></tr>
<tr class="memdesc:a4a2860eb869adc1c431cba4b8acfbe39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjusts the sensitivity of the mouse movement.  <a href="mouse_8c.html#a4a2860eb869adc1c431cba4b8acfbe39">More...</a><br /></td></tr>
<tr class="separator:a4a2860eb869adc1c431cba4b8acfbe39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a94c9794a1c89c39715d89317688cd235"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94c9794a1c89c39715d89317688cd235">&#9670;&nbsp;</a></span>mouseclose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mouseclose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmouse__t.html">mouse_t</a> *&#160;</td>
          <td class="paramname"><em>mouse</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the mouse device file descriptor. This function closes the file descriptor of the mouse device. It sets the file descriptor to -1 to indicate that the device is no longer open. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mouse</td><td>A pointer to the mouse structure containing the file descriptor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function does not return any value. </dd>
<dd>
The function checks if the file descriptor is valid before closing it. </dd></dl>

</div>
</div>
<a id="a4cc4571c32f6195814ce1d16cfd19e7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cc4571c32f6195814ce1d16cfd19e7b">&#9670;&nbsp;</a></span>mouseinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmouse__t.html">mouse_t</a> mouseinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a mouse structure and opens the mouse device file. </p>
<p>This function initializes a mouse structure and opens the mouse device file. It sets the file descriptor of the mouse structure to -1 if an error occurs during the file opening process.</p>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="structmouse__t.html">mouse_t</a> structure containing the initialized values. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">A</td><td><a class="el" href="structmouse__t.html">mouse_t</a> structure with the file descriptor set to -1 if an error occurs.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The mouse device file is opened in non-blocking mode. </dd>
<dd>
The mouse structure is initialized with default values. </dd></dl>

</div>
</div>
<a id="a4e3e727f14416744c71579ff5cc9aab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e3e727f14416744c71579ff5cc9aab9">&#9670;&nbsp;</a></span>mouseread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mouseread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmouse__t.html">mouse_t</a> *&#160;</td>
          <td class="paramname"><em>mouse</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads data from the mouse device and updates the mouse state. This function reads data from the mouse device file descriptor and updates the mouse state based on the read data. It also detects button press and release transitions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mouse</td><td>A pointer to the mouse structure containing the file descriptor and other mouse state variables. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes read from the mouse device. If an error occurs, it returns a negative error code. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-EINVAL</td><td>If the mouse pointer is NULL. </td></tr>
    <tr><td class="paramname">-EBADF</td><td>If the mouse file descriptor is invalid. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The function updates the mouse state variables in the mouse structure. </dd></dl>

</div>
</div>
<a id="a4a2860eb869adc1c431cba4b8acfbe39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a2860eb869adc1c431cba4b8acfbe39">&#9670;&nbsp;</a></span>updatemousesensitivity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updatemousesensitivity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmouse__t.html">mouse_t</a> *&#160;</td>
          <td class="paramname"><em>mouse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>my</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjusts the sensitivity of the mouse movement. </p>
<p>This function adjusts the sensitivity of the mouse movement by scaling the horizontal and vertical movement offsets based on the given sensitivity factors. The new movement offsets are calculated by multiplying the original offsets with the sensitivity factors and rounding them to the nearest integer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mouse</td><td>A pointer to the mouse structure containing the movement offsets. </td></tr>
    <tr><td class="paramname">mx</td><td>The horizontal sensitivity factor. A value greater than 1 increases the sensitivity. </td></tr>
    <tr><td class="paramname">my</td><td>The vertical sensitivity factor. A value greater than 1 increases the sensitivity.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The function assumes that the mouse structure is already initialized and contains valid movement offsets. If the mouse structure is not initialized or the file descriptor is invalid, it will do nothing. </dd>
<dd>
The function updates the movement offsets in the mouse structure. </dd></dl>

</div>
</div>
<a id="abe00130c2443fce556f15e793ce861ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe00130c2443fce556f15e793ce861ef">&#9670;&nbsp;</a></span>validatemouse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int validatemouse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmouse__t.html">mouse_t</a> *&#160;</td>
          <td class="paramname"><em>mouse</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validates the mouse structure and its file descriptor. </p>
<p>This function checks if the mouse structure and its file descriptor are valid. It returns an error code if the structure is not initialized or if the file descriptor is invalid.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mouse</td><td>A pointer to the mouse structure to be validated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An integer representing the result of the validation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The mouse structure and its file descriptor are valid. </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>The mouse structure is not initialized. </td></tr>
    <tr><td class="paramname">-EBADF</td><td>The mouse file descriptor is invalid.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function does not modify the mouse structure or its file descriptor. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
